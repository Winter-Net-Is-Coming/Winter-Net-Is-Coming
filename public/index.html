<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>AL goes Exploring</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
      integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
      crossorigin="anonymous"
    />
    <script defer src="/bundle.js"></script>
    <style>
      #gradient {
        height: 200px;
        background-color: #e9c46a;
      }
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  </head>
  <body id="gradient">
    <div class="container">
      <h1>
        <span style="color: green">AL goes Exploring</span>

        <div id="login-container" class="row float-right">
          <a href="/login.html"
            ><button type="button" class="btn btn-outline-primary mr-1">
              Login
            </button></a
          >
          <a href="/signup.html">
            <button
              type="button"
              class="btn btn-outline-primary"
              href="/signup.html"
            >
              Sign-up
            </button></a
          >
        </div>
        <div id="logout-container" class="row float-right">
          <button type="button" class="btn btn-outline-primary mr-1" onclick="logoutHandler()">
              Logout
            </button>
          <span id='last-score' class='ml-3'>Last Score:</span>
        </div>
      </h1>
    </div>
    <div id="game"></div>
    <div class="container">
      <div class="row">
        <div class="col-sm">
          <h2>CONTROLS</h2>
          <ul>
            <li>Left: <--</li>
            <li>Right: --></li>
            <li>Jump: Space-Bar</li>
            <li>Mouse: to move blocks</li>
          </ul>
        </div>
        <div class="col-sm">
          <h2>MISSION</h2>
          <span>
            Get AL all the way to the other side! You may run into some trouble
            along the way...
          </span>
        </div>
      </div>
    </div>
  </body>
   <script>
    $.ajax({
      type: 'GET',
      url: '/auth/me',
      success: function(data){
        document.getElementById('login-container').style.visibility = 'hidden';
        document.getElementById('logout-container').style.visibility = 'visible';
        if(data.score !== -1){
          document.getElementById('last-score').textContent = `Last Score: ${data.score}`;
        }

        //You have a user/remove sign in and signup
        //$("#login-container").css('visibility', 'none');
      },

      error: function(data){

        document.getElementById('login-container').style.visibility = 'visible';
        document.getElementById('logout-container').style.visibility = 'hidden';
        //document.getElementById('login-container').style.visibility = 'hidden';
        //You have a user/remove sign in and signup
        //$("#login-container").css('visibility', 'none');
      },
    })

    const logoutHandler = () => $.ajax({
      type: 'POST',
      url: '/auth/logout',
      success: () => {
        return (
          document.getElementById('login-container').style.visibility = 'visible',
          document.getElementById('logout-container').style.visibility = 'hidden'
       
        )},
      error: (err) => console.error(err),
    })
  </script>
</html>
